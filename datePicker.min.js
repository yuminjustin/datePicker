!function(){var a=function(a){this.d=new Date,this.c=a,b(this),c(this)};a.prototype.picker=function(a,b){b.preventDefault(),this.o.style.display="block",this.target=a};var b=function(a){a.c.year=a.d.getFullYear(),a.c.month=a.d.getMonth(),a.c.day=a.d.getDate(),a.c.weekday=a.d.getDay()},c=function(a){a.o=document.createElement("div"),a.o.id="dataPicker",d.stageCss(a.o),document.body.appendChild(a.o),a.o.innerHTML=d.header(a.c),d.headerCss(document.getElementById("dPHeader")),a.o.innerHTML+=d.weekBar(a.c.week),d.weekBarCss(document.getElementById("weekBar")),a.o.innerHTML+=d.weekList(),d.weekListCss(document.getElementById("weekList")),e(a),f(a)},d={stageCss:function(a){a.style.cssText="width: 96%;overflow: hidden;height: auto;min-height: 50%;background: #818080;position: fixed;bottom: 0;padding: 10px 2%;display:none;z-index: 999;"},header:function(a){return'<div class="dPHeader" id="dPHeader"><div class="dPHBox"><span class="dPc" id="Ycut">-</span><span id="dPYear">'+a.year+'</span><span class="dPc" id="Yplus">+</span></div><div class="dPHBox"><span class="dPc" id="Mcut">-</span><span id="dPMonth">'+(a.month+1)+'</span><span class="dPc" id="Mplus">+</span></div><div class="dPHBox"><span id="dPDay">'+a.day+'</span></div><button id="dPSave">'+a.submit+"</button></div>"},headerCss:function(a){var b=a.getElementsByClassName("dPHBox"),c="display: block;float: left;height: 22px; line-height: 22px;margin: 4px;";a.style.cssText="width: 100%; height: 30px; line-height: 30px;",document.getElementById("dPSave").style.cssText=c+"background: #007FFF; float: right; border: none; padding: 0 8px;color: #fff;";for(var d=0;d<b.length;d++){b[d].style.cssText="float: left;overflow: hidden;";for(var e=b[d].getElementsByTagName("span"),f=0;f<e.length;f++)e[f].style.cssText=c;for(var g=b[d].getElementsByClassName("dPc"),f=0;f<g.length;f++)g[f].style.cssText+="width: 22px; text-align: center; background: #fff; border-radius: 11px; font-weight: bold;"}},weekBar:function(a){for(var b=a.split(","),c='<div class="dPWeek" id="weekBar">',d=0;7>d;d++)c+="<span>"+b[d]+"</span>";return c+"</div>"},weekBarCss:function(a){a.style.cssText="margin:0 auto;width: 100%; height: 30px; line-height: 30px;";for(var b=a.getElementsByTagName("span"),c=0;c<b.length;c++)b[c].style.cssText="width: 14.2%; display: block;float: left; text-align: center; color: #333;font-weight: bold;background:#96CD31;"},weekList:function(){return'<div id="weekList"></div>'},weekListCss:function(a){a.style.cssText="margin:0 auto;overflow: hidden;"},weekListInner:function(a){for(var b="",c=0;c<a.length;c++)b+=a[c]?"<span>"+a[c]+"</span>":"<span>&nbsp;</span>";return b},weekListInnerCss:function(a,b){for(var c=0;c<a.length;c++)a[c].style.cssText="width: 14.2%; display: block;float: left; text-align: center; color: #333;height: 30px;line-height: 30px;margin-top: 2px;background: #fff;",c%7&&(c+1)%7||(a[c].style.cssText+="background: #a7f5b0;",a[c].setAttribute("weekend","y")),a[c].innerHTML==b&&this.click(a[c]),parseInt(a[c].innerHTML)||(a[c].style.background="#cbea95")},click:function(a){var b=document.getElementById("weekList"),c="xon",d=b.getElementsByClassName(c);d[0]&&(d[0].style.background=d[0].getAttribute("weekend")?"#a7f5b0":"#fff",d[0].style.color="",d[0].className=""),a.className=c,a.style.cssText+="background: #96CD31;color: #fff;"}},e=function(a){var b=a,c=document.getElementById("weekList"),e=g(b.c),f=d.weekListInner(e);c.innerHTML=f,d.weekListInnerCss(c.getElementsByTagName("span"),b.c.day),document.getElementById("dPYear").innerHTML=b.c.year,document.getElementById("dPMonth").innerHTML=function(){return h(b.c.month+1)}(),document.getElementById("dPDay").innerHTML=function(){return h(b.c.day)}()},f=function(a){var c=a,f=document.getElementById("Ycut"),g=document.getElementById("Yplus"),i=document.getElementById("dPYear"),j=document.getElementById("Mcut"),k=document.getElementById("Mplus"),l=document.getElementById("dPMonth"),m=document.getElementById("dPDay"),n=document.getElementById("dPSave"),o=document.getElementById("weekList");f.onclick=function(){i.innerHTML=c.c.year=parseInt(i.innerHTML)-1,e(c)},g.onclick=function(){i.innerHTML=c.c.year=parseInt(i.innerHTML)+1,e(c)},j.onclick=function(){var a=parseInt(l.innerHTML)-1;return a?(c.c.month=a-1,l.innerHTML=h(a),c.c.day=1,m.innerHTML="01",void e(c)):!1},k.onclick=function(){var a=parseInt(l.innerHTML)+1;return 13==a?!1:(c.c.month=a-1,l.innerHTML=h(a),c.c.day=1,m.innerHTML="01",void e(c))},o.onclick=function(a){if(a.target&&parseInt(a.target.innerHTML)){var b=parseInt(a.target.innerHTML);c.c.day=b,m.innerHTML=h(b),d.click(a.target)}},n.onclick=function(){var a=i.innerHTML+"-"+l.innerHTML+"-"+m.innerHTML;c.target.value=a,c.o.style.display="none",b(c),e(c)}},g=function(a){var b=a.year%4,c=new Date,d=[],e=[],f=0;c.setFullYear(a.year),c.setMonth(a.month,1),f=c.getDay();for(var g=0;12>g;g++)7>g?(d[g]=g%2?30:31,1==g&&b&&(d[g]=28),1!=g||b||(d[g]=29)):d[g]=g%2?31:30;for(var g=0;g<d[a.month];g++)e[g]=g+1;for(var g=0;f>g;g++)e.unshift(0);for(var g=0;g<e.length%7;g++)e.push(0);return e},h=function(a){return parseInt(a)<10&&(a="0"+a),a};window.datePicker=a}();
